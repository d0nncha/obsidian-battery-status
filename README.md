# Obsidian Battery Status

Obsidian Battery Status ‚Äî –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–π –ø–ª–∞–≥–∏–Ω –¥–ª—è Obsidian, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ –∑–∞—Ä—è–¥ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø–æ Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –ü–ª–∞–≥–∏–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è Windows –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π Node.js-–ø—Ä–æ—Ü–µ—Å—Å c [`@abandonware/noble`](https://github.com/abandonware/noble) –¥–ª—è —á—Ç–µ–Ω–∏—è GATT Battery Service (0x180F / 0x2A19).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°—Ç–∞—Ç—É—Å-–±–∞—Ä —Å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏ –∑–∞—Ä—è–¥–∞ (`üîã –ò–º—è: 85% | ...`).
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–∞–± –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å CRUD-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π MAC-–∞–¥—Ä–µ—Å–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –æ–ø—Ä–æ—Å–∞.
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã –æ–ø—Ä–æ—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç 5 —Å–µ–∫—É–Ω–¥ –∏ –≤—ã—à–µ).
- –ó–∞–ø—Ä–æ—Å –∑–∞—Ä—è–¥–∞ —á–µ—Ä–µ–∑ helper-—Å–∫—Ä–∏–ø—Ç `platform/windows/helpers/ble-read-battery.js`, –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ.
- –ü–µ—Ä–µ–Ω–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –±—ã—Å—Ç—Ä–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å-–±–∞—Ä.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Windows 10/11 (–¥—Ä—É–≥–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è).
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π Node.js (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω–µ Electron-–æ–∫—Ä—É–∂–µ–Ω–∏—è Obsidian). –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—É—Ç—å –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `OBS_BAT_NODE_BIN`.
- –†–∞–±–æ—á–∏–µ BLE-–¥—Ä–∞–π–≤–µ—Ä—ã –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ prereqs –¥–ª—è [`@abandonware/noble`](https://github.com/abandonware/noble#windows)
  (Visual Studio Build Tools, WinUSB-–¥—Ä–∞–π–≤–µ—Ä—ã –∏ —Ç.–ø.).
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–ø—Ä—è–∂–µ–Ω—ã –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∑–æ–Ω–µ –¥–µ–π—Å—Ç–≤–∏—è.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

1. –°–±–æ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (`main.js`, `manifest.json`, `styles.css`, –∫–∞—Ç–∞–ª–æ–≥ `platform/`) –æ–ø–∏—Å–∞–Ω–∞ –Ω–∏–∂–µ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞¬ª.
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –≤ –ø–∞–ø–∫—É `.obsidian/plugins/obsidian-battery-status` –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian.
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Obsidian (–∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–ª–∞–≥–∏–Ω—ã) –∏ –≤–∫–ª—é—á–∏—Ç–µ ¬´Obsidian Battery Status¬ª —á–µ—Ä–µ–∑ **Settings ‚Üí Community plugins**.
4. –î–æ–±–∞–≤—å—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤–æ –≤–∫–ª–∞–¥–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–ª–∞–≥–∏–Ω–∞. –ö–∞–∂–¥—ã–π –¥–µ–≤–∞–π—Å —Ç—Ä–µ–±—É–µ—Ç:
   - **–ò–º—è** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –≤ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ.
   - **MAC-–∞–¥—Ä–µ—Å** ‚Äî –≤ —Ñ–æ—Ä–º–∞—Ç–µ `AA:BB:CC:DD:EE:FF` (—Ä–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω).
   - **–ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ (—Å–µ–∫.)** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–æ 5 —Å–µ–∫—É–Ω–¥, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 300.

–ï—Å–ª–∏ helper-—Å–∫—Ä–∏–ø—Ç –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–π Node.js, –∑–∞–¥–∞–π—Ç–µ –ø—É—Ç—å –≤ `OBS_BAT_NODE_BIN`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```powershell
$env:OBS_BAT_NODE_BIN = 'C:\\Program Files\\nodejs\\node.exe'
```

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

- **–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö** ‚Äî –ø–æ–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ —É—Å–ø–µ–ª–æ –æ—Ç–≤–µ—Ç–∏—Ç—å, –≤ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `‚Äî%`.
- **–£—Å–ø–µ—à–Ω–æ–µ —á—Ç–µ–Ω–∏–µ** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è helper-—Å–∫—Ä–∏–ø—Ç–∞.
- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏** ‚Äî –ø—Ä–∏ –æ—à–∏–±–∫–µ —á—Ç–µ–Ω–∏—è –≤—ã–≤–æ–¥–∏—Ç—Å—è `‚Äî%`, —Å–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∏–Ω—Ç–µ—Ä–≤–∞–ª —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞).

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   npm install
   ```

2. –°–±–æ—Ä–∫–∞ —Ä–µ–ª–∏–∑–Ω–æ–π –≤–µ—Ä—Å–∏–∏:

   ```bash
   npm run build
   ```

   –ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç `main.js`, —Å–∫–æ–ø–∏—Ä—É–µ—Ç `manifest.json`, `styles.css`, –∞ —Ç–∞–∫–∂–µ helper-—Å–∫—Ä–∏–ø—Ç—ã –≤ –∫–∞—Ç–∞–ª–æ–≥ `platform/windows/helpers/` —Ä—è–¥–æ–º —Å –±–∞–Ω–¥–ª–æ–º.

3. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (watch):

   ```bash
   npm run dev
   ```

   Rollup –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç –±–∞–Ω–¥–ª –∏ helper-—Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ `src/`.

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞–º–∏:

   ```bash
   npm run check
   ```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ app/                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø–ª–∞–≥–∏–Ω–∞ –∏ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ  ‚îú‚îÄ main.ts           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Obsidian API, —Ç–∞–π–º–µ—Ä–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞
‚îÇ  ‚îú‚îÄ services/         # –†–∞–±–æ—Ç–∞ —Å BatteryPort
‚îÇ  ‚îî‚îÄ settings.ts       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∫–ª–∞–¥–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îú‚îÄ platform/            # –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã (–Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç ‚Äî Windows)
‚îÇ  ‚îú‚îÄ windows/          # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å helper-—Å–∫—Ä–∏–ø—Ç–æ–º Noble
‚îÇ  ‚îî‚îÄ shared/           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (CLI, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤)
‚îî‚îÄ ui/                  # –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Å—Ç–∞—Ç—É—Å-–±–∞—Ä)
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–ª–∞–Ω—ã

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Windows; macOS –∏ Linux —Ç—Ä–µ–±—É—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –∏ –ø–æ–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.
- `@abandonware/noble` –Ω–µ –≤–∏–¥–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –±–µ–∑ Battery Service.
- –ü–æ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç UI –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ ‚Äî –∞–¥—Ä–µ—Å–∞ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –≤—Ä—É—á–Ω—É—é.
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ Node.js –∏ fallback –Ω–∞ –¥—Ä—É–≥–∏–µ BLE-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

## –û—Ç–ª–∞–¥–∫–∞

- –õ–æ–≥–∏ helper-—Å–∫—Ä–∏–ø—Ç–∞ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–≥–æ –∞–¥–∞–ø—Ç–µ—Ä–∞ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ Obsidian (`Ctrl+Shift+I`).
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–Ω–µ Obsidian –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å helper –Ω–∞–ø—Ä—è–º—É—é:

  ```bash
  node platform/windows/helpers/ble-read-battery.js --addr AA:BB:CC:DD:EE:FF
  ```

  –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —á—Ç–µ–Ω–∏–∏ —Å–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞—Ä—è–¥–∞ –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫–æ–¥–æ–º `0`.

